{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the ServanaAI Landing application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "First name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the user."
        },
        "signUpDate": {
          "type": "string",
          "description": "Date and time the user signed up.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "signUpDate"
      ]
    },
    "PageContent": {
      "title": "Page Content",
      "type": "object",
      "description": "Stores dynamic content for website pages.",
      "properties": {
        "hero": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string"
            },
            "subtitle": {
              "type": "string"
            }
          }
        },
        "workflow": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string"
            },
            "subtitle": {
              "type": "string"
            },
            "steps": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "icon": {
                    "type": "string",
                    "description": "Name of the lucide-react icon."
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "tags": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [
                  "icon",
                  "title",
                  "description"
                ]
              }
            }
          }
        },
        "assetFeature": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string"
            },
            "subtitle": {
              "type": "string"
            }
          }
        },
        "pricing": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string"
            },
            "subtitle": {
              "type": "string"
            }
          }
        },
        "productExplorer": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string"
            }
          }
        },
        "featuresHero": {
          "type": "object",
          "properties": { "title": { "type": "string" }, "subtitle": { "type": "string" } }
        },
        "incidentManagement": { "$ref": "#/entities/FeatureSectionWithSteps" },
        "assetLifecycle": { "$ref": "#/entities/FeatureSectionWithSteps" },
        "enterpriseMapping": { "$ref": "#/entities/FeatureSectionWithSteps" },
        "userManagement": { "$ref": "#/entities/FeatureSectionWithSteps" },
        "analytics": {
            "type": "object",
            "properties": { "title": { "type": "string" }, "subtitle": { "type": "string" } }
        },
        "cta": {
            "type": "object",
            "properties": { "title": { "type": "string" }, "subtitle": { "type": "string" } }
        }
      }
    },
     "FeatureSectionWithSteps": {
        "title": "Feature Section With Steps",
        "type": "object",
        "description": "Represents a section on the features page that has a title, subtitle, and a series of steps.",
        "properties": {
            "title": { "type": "string" },
            "subtitle": { "type": "string" },
            "steps": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "id": { "type": "number" },
                        "label": { "type": "string" },
                        "title": { "type": "string" },
                        "description": { "type": "string" },
                        "imageUrl": { "type": "string", "description": "URL of the image for the step." }
                    },
                    "required": ["id", "label", "title", "description", "imageUrl"]
                }
            }
        }
    },
    "FormSubmission": {
      "title": "Form Submission",
      "type": "object",
      "description": "Represents a submission from any form on the website, such as a lead capture form.",
      "properties": {
        "formName": {
          "type": "string",
          "description": "The name of the form that was submitted (e.g., 'Contact Sales')."
        },
        "name": { "type": "string", "description": "Full name of the person submitting the form." },
        "email": { "type": "string", "format": "email" },
        "company": { "type": "string" },
        "message": { "type": "string" },
        "submittedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["formName", "email", "submittedAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information.  The `userId` is the Firebase Authentication UID, ensuring path-based ownership.  All data under this path is private to the user.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Authentication UID of the user."
            }
          ]
        }
      },
      {
        "path": "/content/{pageId}",
        "definition": {
          "entityName": "PageContent",
          "schema": {
            "$ref": "#/backend/entities/PageContent"
          },
          "description": "Stores dynamic content for pages like the homepage. Publicly readable, admin writable."
        }
      },
      {
        "path": "/submissions/{submissionId}",
        "definition": {
          "entityName": "FormSubmission",
          "schema": {
            "$ref": "#/backend/entities/FormSubmission"
          },
          "description": "Stores lead capture and other form submissions. Writable by anyone, readable only by admins."
        }
      }
    ],
    "reasoning": "This Firestore structure prioritizes security and scalability for the ServanaAI Landing application by adhering to the core design principles. It focuses on authorization independence, clarity, and predictable schema.\n\nAuthorization Independence:  The structure avoids `get()` calls in security rules by denormalizing authorization data where needed.  In this application, all user data is private, stored under `/users/{userId}`.  No collaborative data scenarios requiring denormalization of membership maps are present.\n\nStructural Segregation: Each collection maintains a homogeneous security posture. User-specific data is stored under their respective user ID. Content data is stored in its own collection with different security rules. Form submissions are also in their own collection, writable by the public but readable only by admins.\n\nAccess Modeling: The structure uses path-based ownership (`/users/{userId}/...`) for private user data. This makes security rules straightforward, based solely on `request.auth.uid`. Content is publicly readable but only writable by an admin. Submissions are publicly writable to allow lead capture from unauthenticated users.\n\nData Clarity and Predictability:  The schema is explicit and predictable."
  }
}
